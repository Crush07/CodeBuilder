<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hysea.hyseaappapi.dao.TableMapper">

    <select id="selectTableNameList" resultMap="Table">
        select table_name from information_schema.tables
        where table_schema = #{baseName}
    </select>

    <select id="selectColumnAll" resultMap="Column">
        select column_name,column_type,if(column_key != 'PRI',0,1) is_primary_key,data_type,character_maximum_length,is_nullable,column_default,column_comment
        from information_schema.columns
        where table_schema = #{baseName}
        and table_name  = #{tableName}
        order by ordinal_position
    </select>

    <resultMap id="Table" type="com.hysea.hyseaappapi.entity.Table">
        <result column="table_name" property="tableName"/>
    </resultMap>

    <resultMap id="Column" type="com.hysea.hyseaappapi.entity.Column">
        <result column="column_name" property="columnName"/>
        <result column="column_type" property="columnType"/>
        <result column="data_type" property="dataType"/>
        <result column="character_maximum_length" property="characterMaximumLength"/>
        <result column="is_nullable" property="isNullable"/>
        <result column="column_default" property="columnDefault"/>
        <result column="column_comment" property="columnComment"/>
        <result column="is_primary_key" property="isPrimaryKey"/>
    </resultMap>

</mapper>
